// Snapshot from https://github.com/nationalarchives/tna-frontend/commit/9ba6e4d9cfe4ba3800f9a74421cf94ee13c2660f
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TNAFrontendAnalytics=t():e.TNAFrontendAnalytics=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,d(a.key),a)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}e.r(t),e.d(t,{EventTracker:()=>W,GA4:()=>X,helpers:()=>z}),window.TNAFrontendCookies=window.TNAFrontendCookies||null,window.TNAFrontendCookieEvents=window.TNAFrontendCookieEvents||null;var v=function(){return u((function e(){if(c(this,e),s(this,"events",{}),s(this,"oneTimeEvents",{}),window.TNAFrontendCookieEvents)return window.TNAFrontendCookieEvents;window.TNAFrontendCookieEvents=this}),[{key:"on",value:function(e,t){Object.hasOwn(this.events,e)||(this.events[e]=[]),this.events[e]=[].concat(r(this.events[e]),[t])}},{key:"once",value:function(e,t){Object.hasOwn(this.oneTimeEvents,e)||(this.oneTimeEvents[e]=[]),this.oneTimeEvents[e]=[].concat(r(this.oneTimeEvents[e]),[t])}},{key:"trigger",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object.hasOwn(this.events,e)&&this.events[e].forEach((function(e){return e.call(t,n)})),Object.hasOwn(this.oneTimeEvents,e))for(var a=this.oneTimeEvents[e].length-1;a>=0;a--)this.oneTimeEvents[e][a].call(this,n),this.oneTimeEvents[e].splice(a,1)}}])}(),f=function(){return u((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),s(this,"extraPolicies",[]),s(this,"domain",""),s(this,"path",""),s(this,"secure",!0),s(this,"policiesKey",""),s(this,"events",null),s(this,"defaultAge",null);var n=t.extraPolicies,a=void 0===n?[]:n,o=t.domain,r=void 0===o?"":o,i=t.path,l=void 0===i?"/":i,u=t.secure,d=void 0===u||u,f=t.policiesKey,g=void 0===f?"cookies_policy":f,m=t.newInstance,p=void 0!==m&&m,h=t.defaultAge,y=void 0===h?31536e3:h;if(p)this.destroyInstance();else if(window.TNAFrontendCookies)return window.TNAFrontendCookies;this.extraPolicies=a,this.domain=r,this.path=l,this.secure=d,this.policiesKey=g,this.defaultAge=y,this.events=new v,this.init(),window.TNAFrontendCookies=this}),[{key:"init",value:function(){this.savePolicies(o(o(o({},Object.fromEntries(this.extraPolicies.map((function(e){return[e.toLowerCase(),!1]})))),{},{usage:!1,settings:!1},this.policies),{},{essential:!0}))}},{key:"destroyInstance",value:function(){window.TNAFrontendCookies=null}},{key:"all",get:function(){var e={};return document.cookie.split("; ").filter((function(e){return e})).forEach((function(t){var n=t.trim().split("=");n[0]&&(e[n[0]]=n[1])})),e}},{key:"policies",get:function(){try{return JSON.parse(this.get(this.policiesKey)||"{}")}catch(e){return{}}}},{key:"exists",value:function(e){return Object.hasOwn(this.all,e)}},{key:"hasValue",value:function(e,t){return this.get(e)==t}},{key:"get",value:function(e){return this.exists(e)?decodeURIComponent(this.all[e]):null}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.maxAge,o=void 0===a?this.defaultAge:a,r=n.sameSite,i=void 0===r?"Lax":r,c=n.domain,l=void 0===c?this.domain:c,u=n.path,s=void 0===u?this.path:u,d=n.secure,v=void 0===d?this.secure:d,f=n.session,g=void 0!==f&&f;if(e){var m="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";").concat(l?" domain=".concat(l,"; "):""," samesite=").concat(i,"; path=").concat(s).concat(g?"":"; max-age=".concat(o)).concat(v?"; secure":"");document.cookie=m,this.events.trigger("setCookie",{key:e,value:t,maxAge:o,path:s,sameSite:i,domain:l,secure:v,session:g,cookie:m})}}},{key:"delete",value:function(e){var t={maxAge:-1,path:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",domain:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||void 0};this.set(e,"",t),this.events.trigger("deleteCookie",o({key:e},t))}},{key:"deleteAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object.keys(this.all).forEach((function(a){e.delete(a,t,n)})),this.events.trigger("deleteAllCookies",{path:t,domain:n})}},{key:"acceptPolicy",value:function(e){this.setPolicy(e,!0),this.events.trigger("acceptPolicy",e),this.events.trigger("changePolicy",s({},e,!0))}},{key:"rejectPolicy",value:function(e){this.setPolicy(e,!1),this.events.trigger("rejectPolicy",e),this.events.trigger("changePolicy",s({},e,!1))}},{key:"setPolicy",value:function(e,t){"essential"!==e&&(this.savePolicies(o(o({},this.policies),{},s(s({},e,t),"essential",!0))),this.events.trigger("changePolicy",s({},e,t)))}},{key:"acceptAllPolicies",value:function(){var e=Object.fromEntries(Object.keys(this.policies).map((function(e){return[e.toLowerCase(),!0]})));this.savePolicies(e),this.events.trigger("acceptAllPolicies"),this.events.trigger("changePolicy",e)}},{key:"rejectAllPolicies",value:function(){var e=o(o({},Object.fromEntries(Object.keys(this.policies).map((function(e){return[e.toLowerCase(),!1]})))),{},{essential:!0});this.savePolicies(e),this.events.trigger("rejectAllPolicies"),this.events.trigger("changePolicy",e)}},{key:"savePolicies",value:function(e){this.set(this.policiesKey,JSON.stringify(e),{maxAge:31536e3})}},{key:"isPolicyAccepted",value:function(e){return Object.hasOwn(this.policies,e)?!0===this.policies[e]:null}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}}])}(),g=function(e){if(""!==e.id)return'id("'+e.id+'")';if(e===document.body)return e.tagName;for(var t=0,n=e.parentNode.childNodes,a=0;a<n.length;a++){var o=n[a];if(o===e)return g(e.parentNode)+"/"+e.tagName+"["+(t+1)+"]";1===o.nodeType&&o.tagName===e.tagName&&t++}},m=function(e,t){return t.some((function(t){return e.includes(t)}))},p=function(e){var t="",n=e;do{for(;n.previousElementSibling;)if(n=n.previousElementSibling,["h1","h2","h3","h4","h5","h6"].includes(n.tagName)||n.classList.length&&m(Array.from(n.classList),["tna-heading-xl","tna-heading-l","tna-heading-m","tna-heading-s"])){t=n.innerText;break}n=n.parentElement}while(n.parentElement&&!t);return t},h={text:function(e){return e.innerText},html:function(e){return e.innerHTML},value:function(e){return e.value},index:function(e,t,n,a){return a},checked:function(e){return e.checked?"checked":"unchecked"},expanded:function(e){var t=e.getAttribute("aria-expanded");return null===t?null:"true"===t.toString()?"opened":"closed"},closestHeading:function(e){return p(e)}};const y=[{scope:".tna-breadcrumbs",areaName:"breadcrumbs",events:[{eventName:"click",targetElement:".tna-breadcrumbs__item--expandable button.tna-breadcrumbs__link",on:"click",data:{state:"expand",value:h.html}}]}],b=[{scope:".tna-checkboxes",areaName:"checkboxes",events:[{eventName:"toggle",targetElement:".tna-checkboxes__item input",on:"change",data:{state:h.checked,value:function(e,t,n){return e.parentNode.innerText},group:function(e,t,n){var a;return null===(a=t.closest(".tna-form__group"))||void 0===a||null===(a=a.querySelector(".tna-form__heading"))||void 0===a?void 0:a.innerText}}}]}],k=[{scope:".tna-details",areaName:"details",events:[{eventName:"click",targetElement:".tna-details__summary",on:"click",data:{state:function(e,t,n){var a,o;return null!==(a=null===(o=t.querySelector(".tna-details__details"))||void 0===o?void 0:o.hasAttribute("open"))&&void 0!==a&&a?"closed":"opened"},value:h.text}}]}],_=[{scope:".tna-footer",areaName:"footer",rootEventName:"global_navigation",events:[{eventName:"link.click",targetElement:".tna-footer__navigation-block-item-link",on:"click",data:{value:h.text},rootData:{data_component_name:"Footer",data_link_type:"Link",data_section:h.closestHeading,data_link:h.text}},{eventName:"social_link.click",targetElement:".tna-footer__social-item-link",on:"click",data:{value:h.text},rootData:{data_component_name:"Footer",data_link_type:"Icon",data_section:"Social media",data_link:function(e){return e.getAttribute("data-name")}}},{eventName:"legal_link.click",targetElement:".tna-footer__legal-item-link",on:"click",data:{value:h.text},rootData:{data_component_name:"Footer",data_link_type:"Link",data_section:"Legal information",data_link:h.text}},{eventName:"mailing_list.click",targetElement:".tna-footer__mailing-list a.tna-button",on:"click",data:{value:h.text},rootData:{data_component_name:"Footer",data_link_type:"Button",data_section:"Mailing list",data_link:h.text}},{eventName:"ogl.click",targetElement:".tna-footer__licence p a.tna-footer__link",on:"click",data:{value:h.text},rootData:{data_component_name:"Footer",data_link_type:"Link",data_section:"OGL",data_link:h.text}},{eventName:"govuk.click",targetElement:".tna-footer__govuk-link",on:"click",data:{value:h.text},rootData:{data_component_name:"Footer",data_link_type:"Logo",data_section:"GOV.UK",data_link:h.text}},{eventName:"theme.change",targetElement:".tna-footer__theme-selector-button",on:"click",data:{value:h.value}}]}],w=[{scope:".tna-gallery",areaName:"gallery",events:[{eventName:"click",targetElement:".tna-gallery__navigation-item",on:"click",data:{value:h.text}},{eventName:"click",targetElement:".tna-gallery__navigation-prev",on:"click",data:{value:function(e,t){return t.querySelector(".tna-gallery__item:not([hidden]) .tna-gallery__item-header").innerText}}},{eventName:"click",targetElement:".tna-gallery__navigation-next",on:"click",data:{value:function(e,t){return t.querySelector(".tna-gallery__item:not([hidden]) .tna-gallery__item-header").innerText}}},{eventName:"keypress",on:"keydown",data:{value:function(e,t,n){return n.key}}},{eventName:"enter-fullscreen",targetElement:'.tna-gallery__options button[value="enter-fullscreen"]',on:"click"},{eventName:"exit-fullscreen",targetElement:'.tna-gallery__options button[value="exit-fullscreen"]',on:"click"},{eventName:"index",targetElement:'.tna-gallery__options button[value="show-index"]',on:"click"}]}],E=[{scope:".tna-global-header",areaName:"header",rootEventName:"global_navigation",events:[{eventName:"toggle",targetElement:".tna-global-header__navigation-button",on:"click",data:{state:h.expanded},rootData:{data_component_name:"Header",data_link_type:"Mobile menu",data_link:function(e){var t=e.getAttribute("aria-expanded");return null===t?null:"true"===t.toString()?"Open menu":"Close menu"},data_section:"Burger menu"}},{eventName:"logo.click",targetElement:".tna-global-header__logo",on:"click",rootData:{data_component_name:"Header",data_link_type:"Logo",data_link:"The National Archives",data_section:"Top navigation and logo"}},{eventName:"primary_link.click",targetElement:".tna-global-header__navigation-item-link",on:"click",data:{value:h.text},rootData:{data_component_name:"Header",data_link_type:"Menu",data_section:h.text,data_position:1,data_link:h.text}},{eventName:"secondary_link.click",targetElement:".tna-global-header__top-navigation-link",on:"click",data:{value:h.text},rootData:{data_component_name:"Header",data_link_type:"Icon",data_link:h.text,data_section:"Top navigation and logo"}}]}],O=[{scope:".tna-header",areaName:"header",events:[{eventName:"toggle",targetElement:".tna-header__navigation-button",on:"click",data:{state:h.expanded}}]}],T=[{scope:".tna-picture",areaName:"picture",events:[{eventName:"toggle_transcript",targetElement:".tna-picture__toggle-transcript",on:"click",data:{state:h.expanded,value:function(e,t,n){var a=p(t),o=t.querySelector(".tna-picture__image"),r=o.getAttribute("src"),i=o.getAttribute("alt"),c="".concat(i," (").concat(r,")");return a?"".concat(a," > ").concat(c):c}}}]}],N=[{scope:".tna-radios",areaName:"radios",events:[{eventName:"toggle",targetElement:".tna-radios__item input",on:"change",data:{state:h.checked,value:function(e,t,n){return e.parentNode.innerText},group:function(e,t,n){var a;return null===(a=t.closest(".tna-form__group"))||void 0===a||null===(a=a.querySelector(".tna-form__heading"))||void 0===a?void 0:a.innerText}}}]}],A=[{scope:".tna-search-field",areaName:"search-field",events:[{eventName:"blurred",targetElement:".tna-search-field__input",on:"blur",data:{value:h.value,group:function(e,t,n){var a;return null===(a=t.querySelector(".tna-form__heading"))||void 0===a?void 0:a.innerText}}}]}],x=[{scope:".tna-text-input",areaName:"text-input",events:[{eventName:"blurred",on:"blur",data:{value:h.value,group:function(e,t,n){var a;return null===(a=t.closest(".tna-form__group"))||void 0===a||null===(a=a.querySelector(".tna-form__heading"))||void 0===a?void 0:a.innerText}}}]}],j=[{scope:".tna-textarea",areaName:"textarea",events:[{eventName:"blurred",on:"blur",data:{value:h.value,group:function(e,t,n){var a;return null===(a=t.closest(".tna-form__group"))||void 0===a||null===(a=a.querySelector(".tna-form__heading"))||void 0===a?void 0:a.innerText}}}]}];function P(e,t,n){return t=D(t),S(e,C()?Reflect.construct(t,n||[],D(e).constructor):t.apply(e,n))}function S(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r,i,c=[],l=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(c.push(a.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,K(a.key),a)}}function V(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){var t=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}function R(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var $=[].concat(R([{scope:".tna-accordion",areaName:"accordion",events:[{eventName:"click",targetElement:".tna-accordion__summary",on:"click",data:{state:h.expanded,value:h.text}}]}]),R(y),R(b),R(k),R(_),R(w),R(E),R(O),R([{scope:".tna-hero",areaName:"hero",events:[{eventName:"toggle_caption",targetElement:".tna-hero__details-summary",on:"click",data:{state:function(e,t,n){var a,o;return null!==(a=null===(o=t.querySelector(".tna-hero__details"))||void 0===o?void 0:o.hasAttribute("open"))&&void 0!==a&&a?"closed":"opened"},value:function(e,t,n){var a;return null===(a=t.querySelector("img[alt]"))||void 0===a?void 0:a.getAttribute("alt")}}}]}]),R(T),R(N),R(A),R(x),R(j)),W=function(){return V((function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};G(this,e),B(this,"cookies",new((null===(t=window.TNAFrontend)||void 0===t?void 0:t.Cookies)||f)),B(this,"events",[]),B(this,"startTime",new Date),B(this,"prefix","tna"),B(this,"addTrackingCode",!0);var a=n.prefix,o=void 0===a?null:a,r=n.addTrackingCode,i=void 0===r||r;o&&(this.prefix=o),this.addTrackingCode=i}),[{key:"start",value:function(e){var t=this;navigator.doNotTrack&&1===navigator.doNotTrack||(this.cookies.isPolicyAccepted("usage")&&this.enableTracking(),this.cookies.on("changePolicy",(function(e){Object.hasOwn(e,"usage")&&(e.usage?t.enableTracking():t.disableTracking())})),e&&this.initAll())}},{key:"enableTracking",value:function(){}},{key:"disableTracking",value:function(){}},{key:"initAll",value:function(){var e=this;$.forEach((function(t){e.addListeners(t.scope,t.areaName,t.events,t.rootEventName||"")}))}},{key:"addListeners",value:function(e,t,n){var a,o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";"string"==typeof e?a=Array.from(document.querySelectorAll(e)):"object"===M(e)&&(a=[e]),a&&a.forEach((function(a){n.forEach((function(n){n.on&&(n.targetElement?Array.from(a.querySelectorAll(n.targetElement)).forEach((function(i,c){return o.attachListener(i,a,r,n,e,t,c+1)})):o.attachListener(a,a,r,n,e,t,1))}))}))}},{key:"generateEventName",value:function(e,t){return"".concat(this.prefix,".").concat(e,".").concat(t.eventName||t.on)}},{key:"attachListener",value:function(e,t,n,a,o,r,i){var c=this,l=a.on,u=a.data,s=a.targetElement,d=a.rootData,v=void 0===d?{}:d;e.addEventListener(l,(function(l){return c.recordEvent(n?"".concat(c.prefix,".").concat(n):c.generateEventName(r,a),q(q({},u),{},{name:c.generateEventName(r,a),value:null!=u&&u.value?c.computedValue(u.value,e,t,l,i):null,state:null!=u&&u.state?c.computedValue(u.state,e,t,l,i):null,group:null!=u&&u.group?c.computedValue(u.group,e,t,l,i):null,xPath:g(e),targetElement:s,timeSincePageLoad:new Date-c.startTime,index:i,scope:o,areaName:r}),Object.fromEntries(Object.entries(v).map((function(n){var a=F(n,2),o=a[0],r=a[1];return[o,c.computedValue(r,e,t,l,i)]}))))}))}},{key:"computedValue",value:function(e,t,n,a,o){return"function"==typeof e?e.call(this,t,n,a,o):null!=e?e:null}},{key:"recordEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.events.push(q(B({event:e},"".concat(this.prefix,".event"),t),n))}},{key:"getTnaMetaTags",value:function(){return Object.fromEntries(Array.from(document.head.querySelectorAll("meta[name^='".concat(this.prefix,".'][content]"))).map((function(e){return[e.getAttribute("name"),e.getAttribute("content")]})))}}])}(),X=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(G(this,t),window.TNAFrontendAnalyticsGA4)return S(e,window.TNAFrontendAnalyticsGA4);var a=n.id,o=void 0===a?"":a,r=n.prefix,i=void 0===r?null:r,c=n.initAll,l=void 0===c||c,u=n.addTrackingCode;return B(e=P(this,t,[{prefix:i,addTrackingCode:void 0===u||u}]),"trackingCodeAdded",!1),B(e,"trackingEnabled",!1),B(e,"gTagId",void 0),window.TNAFrontendAnalyticsGA4=e,e.gTagId=o,e.ga4Disable="ga-disable-".concat(e.gTagId),window.dataLayer=window.dataLayer||[],e.cookies.isPolicyAccepted("usage")||(window[e.ga4Disable]=!0,e.cookies.set(e.ga4Disable,"true")),e.start(l),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),V(t,[{key:"destroy",value:function(){window.TNAFrontendAnalyticsGA4=null}},{key:"recordEvent",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=q(q({event:e},Object.fromEntries(Object.entries(t).map((function(e){var t=F(e,2),a=t[0],o=t[1];return["".concat(n.prefix,".event.").concat(a),o]})))),a);this.pushToDataLayer(o)}},{key:"gtag",value:function(){this.pushToDataLayer(arguments)}},{key:"pushToDataLayer",value:function(e){window.dataLayer.push(e)}},{key:"enableTracking",value:function(){if(!this.trackingEnabled){if(window[this.ga4Disable]=!1,this.cookies.set(this.ga4Disable,"false"),!this.trackingCodeAdded&&this.addTrackingCode){if(!this.gTagId)throw Error("ID was not specified");var e=this.getTnaMetaTags();this.pushToDataLayer(q(q({},e),{},{"gtm.start":(new Date).getTime(),event:"gtm.js"}));var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.async=!0,n.src="https://www.googletagmanager.com/gtm.js?id=".concat(this.gTagId,"&l=dataLayer"),t?t.parentNode.insertBefore(n,t):document.head.appendChild(n),this.trackingCodeAdded=!0}this.trackingEnabled=!0}}},{key:"disableTracking",value:function(){var e=this;this.trackingEnabled&&(window[this.ga4Disable]=!0,this.cookies.set(this.ga4Disable,"true"),Object.keys(this.cookies.all).forEach((function(t){t.startsWith("_ga")&&e.cookies.delete(t)})),this.trackingEnabled=!1)}}])}(W),z={getXPathTo:g,getClosestHeading:p,valueGetters:h};return t})()));